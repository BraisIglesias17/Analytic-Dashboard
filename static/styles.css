/* ── Reset & tokens ─────────────────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
:root {
  --bg:       #0a0a12;
  --surface:  #0f0f1c;
  --card:     #14142a;
  --border:   #22224a;
  --accent:   #5b7fff;
  --accent2:  #ff6b6b;
  --accent3:  #6bcb77;
  --text:     #e0e0f4;
  --muted:    #7878a0;
  --mono:     'Space Mono', monospace;
  --sans:     'DM Sans', sans-serif;
  --radius:   10px;
  --glow:     0 0 24px rgba(91,127,255,.22);
}
html { font-size: 15px; }
body { background: var(--bg); color: var(--text); font-family: var(--sans); min-height: 100vh; }
::selection { background: #5b7fff44; }

/* ── Layout ─────────────────────────────────────────────────────────────── */
.app { display: grid; grid-template-columns: 320px 1fr; min-height: 100vh; }
.sidebar { background: var(--surface); border-right: 1px solid var(--border); display: flex; flex-direction: column; padding: 1.5rem; gap: 1.5rem; overflow-y: auto; }
.main { display: flex; flex-direction: column; overflow: hidden; }

/* ── Header ─────────────────────────────────────────────────────────────── */
.topbar { padding: 1.2rem 2rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 1rem; background: var(--surface); }
.logo { font-family: var(--mono); font-size: 1.1rem; font-weight: 700; color: var(--accent); letter-spacing: -.03em; }
.logo span { color: var(--accent2); }
.tagline { font-size: .78rem; color: var(--muted); font-weight: 300; }
.topbar-right { margin-left: auto; display: flex; gap: .6rem; align-items: center; }

/* ── Section headers ─────────────────────────────────────────────────────── */
.section-label { font-family: var(--mono); font-size: .68rem; color: var(--muted); letter-spacing: .12em; text-transform: uppercase; margin-bottom: .5rem; }

/* ── File Drop Zone ─────────────────────────────────────────────────────── */
.drop-zone {
  border: 1.5px dashed var(--border);
  border-radius: var(--radius);
  padding: 1.5rem 1rem;
  text-align: center;
  cursor: pointer;
  transition: all .2s;
  position: relative;
}
.drop-zone:hover, .drop-zone.drag-over { border-color: var(--accent); background: rgba(91,127,255,.05); }
.drop-zone input { position: absolute; inset: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
.drop-icon { font-size: 1.6rem; margin-bottom: .5rem; }
.drop-zone p { font-size: .82rem; color: var(--muted); line-height: 1.5; }
.drop-zone strong { color: var(--text); }

/* ── File list ───────────────────────────────────────────────────────────── */
.file-list { display: flex; flex-direction: column; gap: .4rem; max-height: 160px; overflow-y: auto; }
.file-item { display: flex; align-items: center; gap: .5rem; background: var(--card); border: 1px solid var(--border); border-radius: 6px; padding: .4rem .7rem; font-size: .78rem; }
.file-item .fname { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text); }
.file-item .fsize { color: var(--muted); font-family: var(--mono); }
.file-item .rm { background: none; border: none; color: var(--muted); cursor: pointer; font-size: .9rem; padding: 0 2px; transition: color .15s; }
.file-item .rm:hover { color: var(--accent2); }
.file-badge { display: inline-block; padding: .15rem .4rem; border-radius: 3px; font-family: var(--mono); font-size: .65rem; margin-right: .3rem; }
.badge-csv { background: rgba(91,127,255,.18); color: #7ea0ff; }
.badge-xlsx { background: rgba(107,203,119,.18); color: #6bcb77; }
.badge-tsv { background: rgba(255,107,107,.18); color: #ff6b6b; }
.badge-txt { background: rgba(166,133,226,.18); color: #a685e2; }

/* ── Parameters ─────────────────────────────────────────────────────────── */
.params { display: flex; flex-direction: column; gap: .75rem; }
.param-row { display: flex; flex-direction: column; gap: .3rem; }
.param-row label { font-size: .75rem; color: var(--muted); font-weight: 500; }
.param-row input[type=text],
.param-row select {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 6px;
  color: var(--text);
  font-family: var(--mono);
  font-size: .8rem;
  padding: .45rem .7rem;
  width: 100%;
  transition: border-color .15s;
  outline: none;
}
.param-row input:focus,
.param-row select:focus { border-color: var(--accent); }
.param-row select option { background: var(--card); }
.toggle-row { display: flex; align-items: center; justify-content: space-between; }
.toggle-row label { font-size: .78rem; color: var(--text); }
.toggle { position: relative; width: 36px; height: 20px; }
.toggle input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; inset: 0; background: var(--border); border-radius: 20px; cursor: pointer; transition: .2s; }
.toggle-slider::after { content:''; position:absolute; left:3px; top:3px; width:14px; height:14px; background:#fff; border-radius:50%; transition:.2s; }
.toggle input:checked + .toggle-slider { background: var(--accent); }
.toggle input:checked + .toggle-slider::after { transform: translateX(16px); }

/* ── Buttons ─────────────────────────────────────────────────────────────── */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
  border: none; border-radius: var(--radius); cursor: pointer;
  font-family: var(--sans); font-weight: 700; letter-spacing: .01em;
  transition: all .2s; white-space: nowrap;
}
.btn-primary {
  background: var(--accent); color: #fff; padding: .7rem 1.4rem; font-size: .88rem;
  width: 100%; box-shadow: var(--glow);
}
.btn-primary:hover:not(:disabled) { background: #7096ff; transform: translateY(-1px); }
.btn-primary:disabled { opacity: .4; cursor: not-allowed; transform: none; }
.btn-sm { background: var(--card); border: 1px solid var(--border); color: var(--text); padding: .35rem .8rem; font-size: .78rem; }
.btn-sm:hover { border-color: var(--accent); color: var(--accent); }
.btn-danger-sm { background: rgba(255,107,107,.1); border: 1px solid rgba(255,107,107,.3); color: var(--accent2); padding: .35rem .8rem; font-size: .78rem; }

/* ── Progress ────────────────────────────────────────────────────────────── */
.progress-wrap { display: none; flex-direction: column; gap: .5rem; }
.progress-wrap.visible { display: flex; }
.progress-bar-bg { background: var(--card); border: 1px solid var(--border); border-radius: 20px; height: 8px; overflow: hidden; }
.progress-bar-fg { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), #a685e2); border-radius: 20px; transition: width .4s ease; }
.progress-label { font-family: var(--mono); font-size: .72rem; color: var(--muted); display: flex; justify-content: space-between; }

/* ── Log terminal ────────────────────────────────────────────────────────── */
.log-box { background: #05050e; border: 1px solid var(--border); border-radius: var(--radius); padding: .8rem 1rem; max-height: 160px; overflow-y: auto; font-family: var(--mono); font-size: .72rem; color: var(--muted); line-height: 1.7; }
.log-box .log-line-ok { color: var(--accent3); }
.log-box .log-line-err { color: var(--accent2); }
.log-box .log-line-info { color: #7ea0ff; }

/* ── Main content area ───────────────────────────────────────────────────── */
.content { flex: 1; overflow-y: auto; padding: 2rem; }

/* ── Empty state ─────────────────────────────────────────────────────────── */
.empty-state { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 60vh; gap: 1rem; color: var(--muted); text-align: center; }
.empty-state .big-icon { font-size: 3.5rem; opacity: .25; }
.empty-state h2 { font-size: 1.1rem; font-weight: 500; color: var(--text); opacity: .4; }
.empty-state p { font-size: .82rem; max-width: 320px; line-height: 1.6; }

/* ── Tabs ─────────────────────────────────────────────────────────────────── */
.tabs { display: flex; gap: .3rem; padding: .8rem 2rem 0; border-bottom: 1px solid var(--border); background: var(--surface); }
.tab { background: none; border: none; border-bottom: 2px solid transparent; padding: .6rem 1.1rem; font-family: var(--sans); font-size: .82rem; font-weight: 500; color: var(--muted); cursor: pointer; transition: all .15s; margin-bottom: -1px; }
.tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.tab:hover:not(.active) { color: var(--text); }
.tab-panel { display: none; }
.tab-panel.active { display: block; }

/* ── Charts dashboard ────────────────────────────────────────────────────── */
.charts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(420px, 1fr)); gap: 1.5rem; }
.chart-card { background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; transition: box-shadow .2s; }
.chart-card:hover { box-shadow: 0 0 0 1px var(--accent), var(--glow); }
.chart-card-header { padding: .7rem 1rem; border-bottom: 1px solid var(--border); font-size: .8rem; font-weight: 600; color: var(--text); display: flex; align-items: center; justify-content: space-between; }
.chart-card img { width: 100%; display: block; }

/* ── Data table ──────────────────────────────────────────────────────────── */
.df-section { margin-bottom: 2.5rem; }
.df-name { font-family: var(--mono); font-size: .85rem; color: var(--accent); margin-bottom: .4rem; }
.df-meta { font-size: .75rem; color: var(--muted); margin-bottom: .8rem; }
.df-meta span { margin-right: 1rem; }
.table-wrap { overflow-x: auto; border-radius: var(--radius); border: 1px solid var(--border); }
table { border-collapse: collapse; width: 100%; font-size: .77rem; font-family: var(--mono); }
thead th { background: var(--surface); padding: .55rem .8rem; text-align: left; color: var(--muted); font-weight: 700; font-size: .68rem; letter-spacing: .08em; text-transform: uppercase; border-bottom: 1px solid var(--border); white-space: nowrap; }
tbody td { padding: .45rem .8rem; border-bottom: 1px solid #1a1a2e; white-space: nowrap; }
tbody tr:last-child td { border-bottom: none; }
tbody tr:hover td { background: rgba(91,127,255,.05); }

/* ── Toast ───────────────────────────────────────────────────────────────── */
.toast { position: fixed; bottom: 1.5rem; right: 1.5rem; background: var(--card); border: 1px solid var(--border); border-radius: var(--radius); padding: .7rem 1.2rem; font-size: .82rem; color: var(--text); box-shadow: 0 4px 24px rgba(0,0,0,.5); z-index: 999; transform: translateY(80px); opacity: 0; transition: all .3s; }
.toast.show { transform: none; opacity: 1; }
.toast.ok { border-left: 3px solid var(--accent3); }
.toast.err { border-left: 3px solid var(--accent2); }

/* ── Scrollbar ───────────────────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--muted); }

/* ── Responsive ──────────────────────────────────────────────────────────── */
@media (max-width: 768px) {
  .app { grid-template-columns: 1fr; }
  .sidebar { border-right: none; border-bottom: 1px solid var(--border); }
  .charts-grid { grid-template-columns: 1fr; }
}